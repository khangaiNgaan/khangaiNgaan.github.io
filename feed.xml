<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>caffeine-Ink</title>
  <subtitle>Wishing you a wonderful day &lt;3</subtitle>
  <link href="https://caffeine.ink/" />
  <link href="https://caffeine.ink/feed.xml" rel="self" />
  <id>https://caffeine.ink/</id>
  <updated>2026-01-27T01:00:00+08:00</updated>
  <author>
    <name>khangai</name>
    <email>khangai@caffeine.ink</email>
  </author>
  <!-- feed articles -->
  <entry>
    <title>在 Arch 上安装 CDE</title>
    <link href="https://caffeine.ink/posts/arch_cde.html" />
    <id>https://caffeine.ink/posts/arch_cde.html</id>
    <published>2025-05-01T11:46:46+08:00</published>
    <updated>2026-01-27T01:00:00+08:00</updated>
    <content type="html">
      <![CDATA[
        <p>通用桌面环境（Common Desktop Environment, CDE）是一个基于 Motif 的桌面环境，最初由 HP、IBM、Sun 等公司合作开发，在1990年代作为商用 Unix 工作站的标准桌面环境被广泛使用，直到2000年代初随着开源桌面环境（KDE, GNOME等）的兴起而被逐渐取代。2012年，CDE 宣布开源，随后被移植到 Linux 上，并被维护至今。</p>
        <img src="https://caffeine.ink/pics/arch_cdesktopenv.png" alt="CDE in Arch Linux"></img>
        <p>目前 CDE 的代码主要托管在 <a href="https://sourceforge.net/projects/cdesktopenv/">SourceForge</a> 上。</p>
        <h2>准备工作</h2>
        <p>启动计算机，进入 Arch Linux，在 <code>tty</code> 中登入 <code>root</code> 账户。使用有线或无线方式连接互联网，并确保网络连线正常。开始之前，最好先滚动更新一下系统。</p>
        <pre><code># pacman -Syu</code></pre>
        <p>我在安装前把 KDE Plasma 卸载了，如果你有安装别的桌面环境，可能得先停掉正在运行的图形界面服务。</p>
        <h2>安装依赖</h2>
        <p>在安装 CDE 之前，需要先安装一些依赖包，这里是：</p>
        <pre><code># pacman -S xorg xorg-server-devel gcc dnsutils git libxinerama libxss ncurses openmotif rpcbind xbitmaps bison flex tcl</code></pre>
        <p>还有 <code>ksh</code> 和 <code>ncompress</code>：</p>
        <pre><code># git clone https://aur.archlinux.org/ksh.git
# git clone https://aur.archlinux.org/ncompress.git</code></pre>
        <p>然后进入这两个目录，编译安装：</p>
        <pre><code># cd ksh
# makepkg -si
# cd ../ncompress
# makepkg -si</code></pre>
        <p>如果你已经安装了 <code>yay</code> 也可用 <code>yay</code> 安装：</p>
        <pre><code># yay -S ksh ncompress</code></pre>
        <p>手动创建 <code>/lib/cpp</code> 符号链接：</p>
        <pre><code># ln -s /usr/bin/cpp /lib/cpp</code></pre>
        <p>这是必要的，CDE 的编译过程依赖于 C 预处理器（<code>cpp</code>）可执行文件位于 <code>/lib/cpp</code> 这个路径。如果找不到这个符号链接，CDE 的编译就会失败。</p>
        <h2>安装 CDE</h2>
        <p>登出 <code>root</code> 账户，登入你的用户账户，以避免使用 <code>root</code> 账户登录图形界面。</p>
        <pre><code># exit</code></pre>
        <p>克隆 CDE 仓库：</p>
        <pre><code>$ git clone https://git.code.sf.net/p/cdesktopenv/code cdesktopenv-code</code></pre>
        <p>编译 CDE：</p>
        <pre><code>$ ./autogen.sh
$ ./configure
$ make
$ sudo make install</code></pre>
        <p>这个过程可能需要很长时间，安装完成后就可以启动 CDE 了。</p>
        <h2>启动 CDE</h2>
        <p>在 <code>tty</code> 中输入：</p>
        <pre><code>$ startx /usr/dt/bin/Xsession</code></pre>
        <p>或者你也可以启动 CDE 自带的 dtlogin 登录管理器：</p>
        <pre><code>$ /usr/dt/bin/dtlogin -daemon</code></pre>
        <p>如果需要开机自动启动 dtlogin 的话，可以用任意文本编辑器在 <code>/etc/systemd/system/</code> 目录下创建一个名为 <code>dtlogin.service</code> 的服务单元文件：</p>
        <pre><code>$ sudo vim /etc/systemd/system/dtlogin.service</code></pre>
        <p>添加以下内容：</p>
        <pre><code>[Unit]
Description=CDE Login Manager
Requires=rpcbind.service
After=systemd-user-sessions.service
          
[Service]
ExecStart=/usr/dt/bin/dtlogin

[Install]
Alias=display-manager.service</code></pre>
        <p>保存并退出：</p>
        <pre><code>:wq</code></pre>
        <p>启用服务：</p>
        <pre><code>$ sudo systemctl enable dtlogin.service</code></pre>
        <p>重启计算机，CDE 就会自动启动了。</p>
      ]]>
    </content>
  </entry>
</feed>